<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="Low-level parser for the DjVu transfer format."><title>sndjvu_format::parsing - Rust</title><link rel="preload" as="font" type="font/woff2" crossorigin href="../../static.files/SourceSerif4-Regular-46f98efaafac5295.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../static.files/FiraSans-Regular-018c141bf0843ffd.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../static.files/FiraSans-Medium-8f9a781e4970d388.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../static.files/SourceCodePro-Regular-562dcc5011b6de7d.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../static.files/SourceCodePro-Semibold-d899c5a5c4aeb14a.ttf.woff2"><link rel="stylesheet" href="../../static.files/normalize-76eba96aa4d2e634.css"><link rel="stylesheet" href="../../static.files/rustdoc-804b98a1284a310a.css"><meta name="rustdoc-vars" data-root-path="../../" data-static-root-path="../../static.files/" data-current-crate="sndjvu_format" data-themes="" data-resource-suffix="" data-rustdoc-version="1.77.0-nightly (2d7be7393 2023-12-23)" data-channel="nightly" data-search-js="search-2b6ce74ff89ae146.js" data-settings-js="settings-4313503d2e1961c2.js" ><script src="../../static.files/storage-f2adc0d6ca4d09fb.js"></script><script defer src="../sidebar-items.js"></script><script defer src="../../static.files/main-305769736d49e732.js"></script><noscript><link rel="stylesheet" href="../../static.files/noscript-feafe1bb7466e4bd.css"></noscript><link rel="alternate icon" type="image/png" href="../../static.files/favicon-16x16-8b506e7a72182f1c.png"><link rel="alternate icon" type="image/png" href="../../static.files/favicon-32x32-422f7d1d52889060.png"><link rel="icon" type="image/svg+xml" href="../../static.files/favicon-2c020d218678b618.svg"></head><body class="rustdoc mod"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="mobile-topbar"><button class="sidebar-menu-toggle">&#9776;</button></nav><nav class="sidebar"><div class="sidebar-crate"><h2><a href="../../sndjvu_format/index.html">sndjvu_format</a><span class="version">0.2.0</span></h2></div><h2 class="location"><a href="#">Module parsing</a></h2><div class="sidebar-elems"><section><ul class="block"><li><a href="#structs">Structs</a></li><li><a href="#enums">Enums</a></li><li><a href="#functions">Functions</a></li></ul></section><h2><a href="../index.html">In crate sndjvu_format</a></h2></div></nav><div class="sidebar-resizer"></div>
    <main><div class="width-limiter"><nav class="sub"><form class="search-form"><span></span><div id="sidebar-button" tabindex="-1"><a href="../../sndjvu_format/all.html" title="show sidebar"></a></div><input class="search-input" name="search" aria-label="Run search in the documentation" autocomplete="off" spellcheck="false" placeholder="Click or press ‘S’ to search, ‘?’ for more options…" type="search"><div id="help-button" tabindex="-1"><a href="../../help.html" title="help">?</a></div><div id="settings-menu" tabindex="-1"><a href="../../settings.html" title="settings"><img width="22" height="22" alt="Change settings" src="../../static.files/wheel-7b819b6101059cd0.svg"></a></div></form></nav><section id="main-content" class="content"><div class="main-heading"><h1>Module <a href="../index.html">sndjvu_format</a>::<wbr><a class="mod" href="#">parsing</a><button id="copy-path" title="Copy item path to clipboard"><img src="../../static.files/clipboard-7571035ce49a181d.svg" width="19" height="18" alt="Copy item path"></button></h1><span class="out-of-band"><a class="src" href="../../src/sndjvu_format/parsing/mod.rs.html#1-1496">source</a> · <button id="toggle-all-docs" title="collapse all docs">[<span>&#x2212;</span>]</button></span></div><details class="toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><p>Low-level parser for the DjVu transfer format.</p>
<p>“Low-level” means that only the grittiest details of the file format are abstracted away,
and that flexibility is prioritized over convenience in the design of the interface.
Callers only need to load a relatively small amount of data into memory to begin parsing, and
can choose exactly which parts of the document they want to parse.</p>
<p>Entry points are the <a href="fn.document.html" title="fn sndjvu_format::parsing::document"><code>document</code></a> and <a href="fn.indirect_component.html" title="fn sndjvu_format::parsing::indirect_component"><code>indirect_component</code></a> free functions; other key items
are <a href="enum.Progress.html" title="enum sndjvu_format::parsing::Progress"><code>Progress</code></a> and the pointer-like types <a href="struct.ComponentP.html" title="struct sndjvu_format::parsing::ComponentP"><code>ComponentP</code></a>, <a href="struct.ElementP.html" title="struct sndjvu_format::parsing::ElementP"><code>ElementP</code></a>.</p>
<h3 id="incremental-parsing"><a href="#incremental-parsing">Incremental parsing</a></h3>
<p>A DjVu document in the transfer format is a sequence of bytes. A major design goal of this
module is that you can parse parts of a document without having all the bytes in memory at any
one time. The parser keeps track of a correspondence between positions in an abstract byte
stream and features of the document structure, and the caller provides a chunk of bytes from
a specific position when it wants to parse the corresponding feature. The functions that work
this way are:</p>
<ul>
<li><a href="fn.document.html" title="fn sndjvu_format::parsing::document"><code>document</code></a></li>
<li><a href="fn.indirect_component.html" title="fn sndjvu_format::parsing::indirect_component"><code>indirect_component</code></a></li>
<li><a href="struct.ComponentP.html#method.feed" title="method sndjvu_format::parsing::ComponentP::feed"><code>ComponentP::feed</code></a></li>
<li><a href="struct.ElementP.html#method.feed" title="method sndjvu_format::parsing::ElementP::feed"><code>ElementP::feed</code></a></li>
</ul>
<p>The return type of each of these looks like <code>Result&lt;Progress&lt;T, N&gt;, Error&gt;</code>, which is how we
represent this set of possible outcomes:</p>
<ul>
<li>some part of the provided data was invalid (<code>Result::Err</code>)</li>
<li>not enough bytes were provided to parse the requested document feature
(<code>Result::Ok(Progress::None)</code>)</li>
<li>parsing succeeded (<code>Result::Ok(Progress::Advanced)</code>)</li>
<li>there is no feature to parse at this position (<code>Result::Ok(Progress::End)</code>)—this is a
possible outcome only for <a href="struct.ComponentP.html#method.feed" title="method sndjvu_format::parsing::ComponentP::feed"><code>ComponentP::feed</code></a> and <a href="struct.ElementP.html#method.feed" title="method sndjvu_format::parsing::ElementP::feed"><code>ElementP::feed</code></a></li>
</ul>
</div></details><h2 id="structs" class="section-header"><a href="#structs">Structs</a></h2><ul class="item-table"><li><div class="item-name"><a class="struct" href="struct.Bookmark.html" title="struct sndjvu_format::parsing::Bookmark">Bookmark</a></div><div class="desc docblock-short">A single bookmark record from the (decompressed) <code>NAVM</code> chunk.</div></li><li><div class="item-name"><a class="struct" href="struct.Bundled.html" title="struct sndjvu_format::parsing::Bundled">Bundled</a></div><div class="desc docblock-short">Data from the <code>DIRM</code> chunk that’s only present in bundled documents.</div></li><li><div class="item-name"><a class="struct" href="struct.BundledIter.html" title="struct sndjvu_format::parsing::BundledIter">BundledIter</a></div><div class="desc docblock-short">Iterator over “pointers” to each component of a bundled multi-page document.</div></li><li><div class="item-name"><a class="struct" href="struct.Chunk.html" title="struct sndjvu_format::parsing::Chunk">Chunk</a></div><div class="desc docblock-short">A chunk from a <code>DJVU</code> or <code>DJVI</code> component whose type wasn’t recognized.</div></li><li><div class="item-name"><a class="struct" href="struct.ComponentMeta.html" title="struct sndjvu_format::parsing::ComponentMeta">ComponentMeta</a></div><div class="desc docblock-short">Basic metadata about one component of a multi-page document.</div></li><li><div class="item-name"><a class="struct" href="struct.ComponentP.html" title="struct sndjvu_format::parsing::ComponentP">ComponentP</a></div><div class="desc docblock-short">Pointer-like immutable cursor to the start or end of a component.</div></li><li><div class="item-name"><a class="struct" href="struct.DecodedAntz.html" title="struct sndjvu_format::parsing::DecodedAntz">DecodedAntz</a></div><div class="desc docblock-short">Contents of an <code>ANTz</code> chunk after BZZ decompression.</div></li><li><div class="item-name"><a class="struct" href="struct.DecodedNavm.html" title="struct sndjvu_format::parsing::DecodedNavm">DecodedNavm</a></div><div class="desc docblock-short">Contents of the <code>NAVM</code> chunk after BZZ decompression.</div></li><li><div class="item-name"><a class="struct" href="struct.Dirm.html" title="struct sndjvu_format::parsing::Dirm">Dirm</a></div><div class="desc docblock-short">Parsed representation of the <code>DIRM</code> chunk.</div></li><li><div class="item-name"><a class="struct" href="struct.DirmExtra.html" title="struct sndjvu_format::parsing::DirmExtra">DirmExtra</a></div><div class="desc docblock-short">Compressed portion of the <code>DIRM</code> chunk.</div></li><li><div class="item-name"><a class="struct" href="struct.ElementP.html" title="struct sndjvu_format::parsing::ElementP">ElementP</a></div><div class="desc docblock-short">Pointer-like immutable cursor to the start or end of an element.</div></li><li><div class="item-name"><a class="struct" href="struct.Error.html" title="struct sndjvu_format::parsing::Error">Error</a></div><div class="desc docblock-short">An error encountered while parsing.</div></li><li><div class="item-name"><a class="struct" href="struct.Fgbz.html" title="struct sndjvu_format::parsing::Fgbz">Fgbz</a></div><div class="desc docblock-short">Parsed representation of an <code>FGbz</code> chunk.</div></li><li><div class="item-name"><a class="struct" href="struct.FgbzIndices.html" title="struct sndjvu_format::parsing::FgbzIndices">FgbzIndices</a></div><div class="desc docblock-short">Compressed portion of an <code>FGbz</code> chunk.</div></li><li><div class="item-name"><a class="struct" href="struct.Info.html" title="struct sndjvu_format::parsing::Info">Info</a></div><div class="desc docblock-short">Parsed representation of an <code>INFO</code> chunk.</div></li><li><div class="item-name"><a class="struct" href="struct.Iw44.html" title="struct sndjvu_format::parsing::Iw44">Iw44</a></div><div class="desc docblock-short">Parsed representation of an <code>FG44</code>, <code>BG44</code>, or <code>TH44</code> chunk.</div></li><li><div class="item-name"><a class="struct" href="struct.Mmr.html" title="struct sndjvu_format::parsing::Mmr">Mmr</a></div><div class="desc docblock-short">Raw MMR-compressed data from an <code>Smmr</code> chunk.</div></li><li><div class="item-name"><a class="struct" href="struct.MmrStripes.html" title="struct sndjvu_format::parsing::MmrStripes">MmrStripes</a></div><div class="desc docblock-short">“Striped” MMR-compressed data from an <code>Smmr</code> chunk.</div></li><li><div class="item-name"><a class="struct" href="struct.ParsingAnnots.html" title="struct sndjvu_format::parsing::ParsingAnnots">ParsingAnnots</a></div><div class="desc docblock-short">Fallible iterator for parsing the annotations from a string.</div></li><li><div class="item-name"><a class="struct" href="struct.ParsingBookmarks.html" title="struct sndjvu_format::parsing::ParsingBookmarks">ParsingBookmarks</a></div><div class="desc docblock-short">Fallible iterator for parsing the bookmarks from a decompressed <code>NAVM</code> chunk.</div></li><li><div class="item-name"><a class="struct" href="struct.ParsingStripes.html" title="struct sndjvu_format::parsing::ParsingStripes">ParsingStripes</a></div><div class="desc docblock-short">Fallible iterator for parsing the stripe data from an <code>Smmr</code> chunk.</div></li><li><div class="item-name"><a class="struct" href="struct.RawAnta.html" title="struct sndjvu_format::parsing::RawAnta">RawAnta</a></div><div class="desc docblock-short">Unparsed representation of an <code>ANTa</code> chunk.</div></li><li><div class="item-name"><a class="struct" href="struct.RawAntz.html" title="struct sndjvu_format::parsing::RawAntz">RawAntz</a></div><div class="desc docblock-short">Unparsed representation of an <code>ANTz</code> chunk.</div></li><li><div class="item-name"><a class="struct" href="struct.RawBg44.html" title="struct sndjvu_format::parsing::RawBg44">RawBg44</a></div><div class="desc docblock-short">Unparsed representation of a <code>BG44</code> chunk.</div></li><li><div class="item-name"><a class="struct" href="struct.RawBgjp.html" title="struct sndjvu_format::parsing::RawBgjp">RawBgjp</a></div><div class="desc docblock-short">Represents a <code>BGjp</code> chunk, which doesn’t need parsing.</div></li><li><div class="item-name"><a class="struct" href="struct.RawDirm.html" title="struct sndjvu_format::parsing::RawDirm">RawDirm</a></div><div class="desc docblock-short">Unparsed representation of the <code>DIRM</code> chunk.</div></li><li><div class="item-name"><a class="struct" href="struct.RawDjbz.html" title="struct sndjvu_format::parsing::RawDjbz">RawDjbz</a></div><div class="desc docblock-short">Represents a <code>Djbz</code> chunk, which doesn’t need further parsing.</div></li><li><div class="item-name"><a class="struct" href="struct.RawFg44.html" title="struct sndjvu_format::parsing::RawFg44">RawFg44</a></div><div class="desc docblock-short">Unparsed representation of an <code>FG44</code> chunk.</div></li><li><div class="item-name"><a class="struct" href="struct.RawFgbz.html" title="struct sndjvu_format::parsing::RawFgbz">RawFgbz</a></div><div class="desc docblock-short">Unparsed representation of an <code>FGbz</code> chunk.</div></li><li><div class="item-name"><a class="struct" href="struct.RawFgjp.html" title="struct sndjvu_format::parsing::RawFgjp">RawFgjp</a></div><div class="desc docblock-short">Represents an <code>FGjp</code> chunk, which doesn’t need parsing.</div></li><li><div class="item-name"><a class="struct" href="struct.RawIncl.html" title="struct sndjvu_format::parsing::RawIncl">RawIncl</a></div><div class="desc docblock-short">Represents an <code>INCL</code> chunk, which doesn’t need parsing.</div></li><li><div class="item-name"><a class="struct" href="struct.RawInfo.html" title="struct sndjvu_format::parsing::RawInfo">RawInfo</a></div><div class="desc docblock-short">Unparsed representation of an <code>INFO</code> chunk.</div></li><li><div class="item-name"><a class="struct" href="struct.RawNavm.html" title="struct sndjvu_format::parsing::RawNavm">RawNavm</a></div><div class="desc docblock-short">Unparsed representation of the <code>NAVM</code> chunk.</div></li><li><div class="item-name"><a class="struct" href="struct.RawSjbz.html" title="struct sndjvu_format::parsing::RawSjbz">RawSjbz</a></div><div class="desc docblock-short">Represents an <code>Sjbz</code> chunk, which doesn’t need further parsing.</div></li><li><div class="item-name"><a class="struct" href="struct.RawSmmr.html" title="struct sndjvu_format::parsing::RawSmmr">RawSmmr</a></div><div class="desc docblock-short">Unparsed representation of an <code>Smmr</code> chunk.</div></li><li><div class="item-name"><a class="struct" href="struct.RawTh44.html" title="struct sndjvu_format::parsing::RawTh44">RawTh44</a></div><div class="desc docblock-short">Unparsed representation of an <code>Smmr</code> chunk.</div></li><li><div class="item-name"><a class="struct" href="struct.RawTxta.html" title="struct sndjvu_format::parsing::RawTxta">RawTxta</a></div><div class="desc docblock-short">Unparsed representation of an <code>TXTa</code> chunk.</div></li><li><div class="item-name"><a class="struct" href="struct.RawTxtz.html" title="struct sndjvu_format::parsing::RawTxtz">RawTxtz</a></div><div class="desc docblock-short">Unparsed representation of a <code>TXTz</code> chunk.</div></li><li><div class="item-name"><a class="struct" href="struct.Smmr.html" title="struct sndjvu_format::parsing::Smmr">Smmr</a></div><div class="desc docblock-short">Parsed representation of an <code>Smmr</code> chunk.</div></li><li><div class="item-name"><a class="struct" href="struct.ThumbnailP.html" title="struct sndjvu_format::parsing::ThumbnailP">ThumbnailP</a></div><div class="desc docblock-short">Pointer-like immutable cursor to the start or end of a thumbnail.</div></li><li><div class="item-name"><a class="struct" href="struct.Txt.html" title="struct sndjvu_format::parsing::Txt">Txt</a></div><div class="desc docblock-short">Parsed representation of a <code>TXTa</code> or (decompressed) <code>TXTz</code> chunk.</div></li></ul><h2 id="enums" class="section-header"><a href="#enums">Enums</a></h2><ul class="item-table"><li><div class="item-name"><a class="enum" href="enum.ComponentHead.html" title="enum sndjvu_format::parsing::ComponentHead">ComponentHead</a></div><div class="desc docblock-short">Parsed representation of the start of a component.</div></li><li><div class="item-name"><a class="enum" href="enum.DocumentHead.html" title="enum sndjvu_format::parsing::DocumentHead">DocumentHead</a></div><div class="desc docblock-short">Parsed representation of the start of a document.</div></li><li><div class="item-name"><a class="enum" href="enum.Element.html" title="enum sndjvu_format::parsing::Element">Element</a></div><div class="desc docblock-short">An unparsed chunk that represents a page element.</div></li><li><div class="item-name"><a class="enum" href="enum.Iw44Kind.html" title="enum sndjvu_format::parsing::Iw44Kind">Iw44Kind</a></div><div class="desc docblock-short">Subtypes of the <code>FG44</code>/<code>BG44</code>/<code>TH44</code> chunk types.</div></li><li><div class="item-name"><a class="enum" href="enum.Progress.html" title="enum sndjvu_format::parsing::Progress">Progress</a></div><div class="desc docblock-short">The outcome of a parsing operation, if no <a href="struct.Error.html" title="struct sndjvu_format::parsing::Error"><code>Error</code></a> was encountered.</div></li><li><div class="item-name"><a class="enum" href="enum.SmmrBody.html" title="enum sndjvu_format::parsing::SmmrBody">SmmrBody</a></div><div class="desc docblock-short">Possible formats for the MMR data in an <code>Smmr</code> chunk.</div></li></ul><h2 id="functions" class="section-header"><a href="#functions">Functions</a></h2><ul class="item-table"><li><div class="item-name"><a class="fn" href="fn.annots.html" title="fn sndjvu_format::parsing::annots">annots</a></div><div class="desc docblock-short">Start parsing annotations from the string content of a <code>ANTa</code> or <code>ANTz</code> chunk.</div></li><li><div class="item-name"><a class="fn" href="fn.annots_lizardtech.html" title="fn sndjvu_format::parsing::annots_lizardtech">annots_lizardtech</a></div></li><li><div class="item-name"><a class="fn" href="fn.document.html" title="fn sndjvu_format::parsing::document">document</a></div><div class="desc docblock-short">Start parsing a DjVu document from some bytes.</div></li><li><div class="item-name"><a class="fn" href="fn.indirect_component.html" title="fn sndjvu_format::parsing::indirect_component">indirect_component</a></div><div class="desc docblock-short">Start parsing a component of an indirect multi-page DjVu document from some bytes.</div></li></ul></section></div></main></body></html>